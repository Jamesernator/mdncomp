/*!
	mdncomp (version: see package.json)
	Copyright (c) 2018 Epistemex
	www.epistemex.com
*/
"use strict";module.exports=init;const ANSI={reset:"[0m",bright:"[1m",dim:"[2m",clrToCursor:"[1K",cursorUp:"[1A",black:"[30m",red:"[31m",green:"[32;1m",yellow:"[33m",blue:"[34m",magenta:"[35m",cyan:"[36m",white:"[37m",gray:"[30;1m"},lf="\r\n",yes="Y",no="-",yes16="âœ”",no16="âœ˜",saves=[],version=require("../package.json").version,args=process.argv,log=console.log.bind(console),urlPrefix="https://raw.githubusercontent.com/epistemex/data-for-mdncomp/master/";let mdn,options,https,fs,shortPad=1;function buildTable(){const t=[];return listTopLevels().forEach(e=>{"browsers"!==e&&function e(o,n,r){const i=o[n];"object"==typeof i&&Object.keys(i).forEach(o=>{"__compat"!==o&&(t.push(r+"."+o),e(i,o,r+"."+o))})}(mdn,e,e)}),t}function listTopLevels(){let t=Object.keys(mdn),e=t.indexOf("browsers");return e>=0&&t.splice(e,1),t}function listBrowsers(){return Object.keys(mdn.browsers)}function getComparer(t){let e,o,n="";t.startsWith("/")?(t=(o=(t=t.substr(1)).split("/"))[0],n=o[1]):(t.startsWith("*")||(t="*"+t),t.endsWith("*")||(t+="*"),t="^"+t.split("*").join(".*")+"$");try{e=new RegExp(t,n)}catch(t){log("Invalid regular expression:",t.message),process.exit(-1)}return e}function getPathAsObject(t,e){let o=t.split("."),n=mdn;return o.forEach(t=>{n&&n[t]&&(n=n[t])}),e&&Object.keys(n).forEach(t=>{n&&n[t].__compat&&delete n[t]}),n}function nameFromPath(t){let e=getExt(t);return e.length?e:t}function getExt(t){let e=t.lastIndexOf(".");return e<0?"":t.substr(++e)}function prePathFromPath(t){let e=t.split("."),o=mdn,n="";return e.pop(),e.forEach(t=>{o&&(o[t].__compat&&(n+=t+"."),o=o[t])}),n.length>1?n:""}function isCompat(t){let e=getPathAsObject(t);return!!e&&"object"==typeof e.__compat}function cleanHTML(t,e){return t=(t=t.replace(/<code>/gi,ANSI.cyan).replace(/<\/code>/gi,ANSI.white)).replace(/(<([^>]+)>)/gi,""),e&&(t=t.replace(/&lt;/gi,"<").replace(/&gt;/gi,">")),t}function breakLine(t,e){let o,n=new Output(0),r=Math.max(62,e>>>0||72),i=t.substr(0,r);for(;i.length===r;)(o=i.lastIndexOf(" "))<0&&(o=r),n.addLine(i.substr(0,o).trim()),i=(t=t.substr(o)).substr(1,r);return n.add(i.trim()),n.toString()}function indent(t){let e="",o=0;for(let r of t)","===r||"{"===r?("{"===r&&o++,e+=r+n()):"}"===r?(o--,e+=n()+r):e+=":"===r?r+" ":r;function n(){return lf+"  ".repeat(o)}return e}function getMaxLength(t){let e=0;return t.forEach(t=>{let o=(prePathFromPath(t)+nameFromPath(t)).length;o>e&&(e=o)}),e}function init(){3!==args.length||"--update"!==args[2]&&"--fupdate"!==args[2]&&"--cupdate"!==args[2]?((options=require("commander")).version(version,"-v, --version").usage("[options] <feature>").description("Get MDN Browser Compatibility data."+lf+"  Version: "+version+lf+"  (c) 2018 epistemex.com").option("-l, --list","List paths starting with the given value or '.' for top-level").option("-o, --out <path>","Save information to file. Extension for type, or --type.").option("-t, --type <type>","Output format (ansi, txt, svg)","ansi").option("-x, --overwrite","Overwrites an existing file with --out option.").option("-d, --desktop","Show desktop only").option("-m, --mobile","Show mobile devices only").option("-c, --case-sensitive","Search in case-sensitive mode").option("-a, --show-all","If search results in more than entry, show info for all.").option("-i, --index <index>","Show this index from a multiple result list.",-1).option("-s, --shorthand","Show compatibility as shorthand with multiple results").option("-h, --shorthand-split","Split a shorthand line into two lines (use with -s)").option("-b, --no-colors","Don't use colors in output").option("--max-chars <width>","Max number of chars per line before wrap.",72).option("-N, --no-notes","Don't show notes").option("-e, --noteend","Show notes (-n) at end instead of in sections (text)").option("-f, --markdown","Format link as markdown and turns off colors.").option("-w, --width <width>","Used with -o, Set width of image",800).option("--browser","Show information about this browser, or if '.' list.").option("--raw","Output the raw JSON data.").option("--update, --fupdate, --cupdate","Update BCD from remote (--fupdate=force, --cupdate=check).").action(go).on("--help",()=>{log(),log("  Examples:"),log("    mdncomp arcTo                   show information for arcTo"),log("    mdncomp toblob.                 will find HTMLCanvasElement.toBlob"),log("    mdncomp --list .                list all top-levels"),log("    mdncomp blob*der -o info.svg    export as svg"),log()}).parse(args),options.args.length||options.help()):update("--fupdate"===args[2],"--cupdate"===args[2])}function outInfo(t){Array.isArray(t)&&(t=t.join(lf)),log(t)}function outStore(t,e){Array.isArray(t)&&(t=t.join(lf)),e||!options.out?log(t):saves.push(t)}function go(t){if(mdn=require("../data/data.json"),options.out&&"ansi"===options.type&&(options.type=getExt(options.out||".txt")),options.desktop&&options.mobile&&(options.desktop=options.mobile=!1),options.colors&&!options.markdown&&"txt"!==options.type||Object.keys(ANSI).forEach(t=>{ANSI[t]=""}),options.list)"."===t?outInfo(listTopLevels()):["deprecated","experimental"].indexOf(t)>=0?outInfo(listOnStatus(t)):outInfo(list(t,options.caseSensitive));else if(options.browser)"."===t?(outInfo(listBrowsers()),outInfo(lf+"Valid statuses:"),outInfo(ANSI.green+getBrowserStatusList().join(", ")+ANSI.white)):outInfo(listBrowser(t.toLowerCase()));else{let e=search(t,options.caseSensitive);if(e.length)if(1===e.length||options.index>=0&&options.index<e.length||options.showAll&&("svg"!==options.type||options.raw))options.shorthand&&(shortPad=getMaxLength(e)),options.index>=0&&options.index<e.length&&(e=e.splice(options.index,1)),e.forEach(t=>{!function(t){let e=new MDNComp(t);options.raw?outInfo(indent(JSON.stringify(getPathAsObject(e.path,!0)))):"svg"===options.type?outStore(compatToSVG(e)):outStore(options.shorthand?compatToShort(e,shortPad):compatToLong(e))}(t)}),"svg"!==options.type&&outStore(ANSI.magenta+"Data from MDN - `npm i -g mdncomp` by epistemex"+ANSI.white+lf),function(){let t;if(options.out&&saves.length)if((t=require("fs")).existsSync(options.out)&&!options.overwrite){const t=require("readline"),o=t.createInterface({input:process.stdin,output:process.stdout});o.question(ANSI.yellow+"A file exist with this name. Overwrite (y, default no)? "+ANSI.white,t=>{"y"===t.toLowerCase()||"yes"===t.toLowerCase()?e(function(){o.close()}):(log("File not saved."),o.close())})}else e();function e(e){t.writeFile(options.out,saves.join("\n"),"utf8",function(t){if(t)return log("An error occurred:"+lf+t);log('Saved output to file "'+options.out+'"!'),e&&e()})}}();else{let t=(e.length+"").length;e.forEach((e,o)=>{outInfo(ANSI.yellow+"["+ANSI.green+(o+"").padStart(t)+ANSI.yellow+"] "+ANSI.white+e)})}else outInfo("Not found.")}}String.prototype.centerAnsi=function(t){let e=t-this.ansiLength()>>>1,o=" ".repeat(e)+this+" ".repeat(e);return" ".substr(0,t-o.ansiLength())+o},String.prototype.ansiLength=function(){return this.ansiFree().length},String.prototype.ansiFree=function(){return this.replace(/\x1b[^m]*m/g,"")};const io={request:function(t,e,o,n,r){function i(t,e){r?r({statusCode:t.statusCode,error:e}):log("Error",t,e)}https||(https=require("https")),e=e||function(){return!0},https.get(t,t=>{let s="";if(200===t.statusCode&&e({headers:t.headers})){let e=0|t.headers["content-length"];t.on("data",t=>{s+=t,o&&o(e?s.length/e:s.length%7/7)}).on("end",()=>{n(s)})}else r&&i(t,"")}).on("error",t=>i(res,t))},writeAll:function(t,e){let o=[],n=t.length,r=!1;fs||(fs=require("fs"));for(let e of t)fs.writeFile(e.path,e.data,"utf8",t=>{i({path:e.path,err:t})});function i(t){o.push(t),t.err&&(r=!0),--n||e(o,r)}}};function update(t,e){const o=require("path"),n=ANSI.clrToCursor+ANSI.cursorUp,r=o.normalize(o.dirname(process.mainModule.filename)+"/../data/data."),i=r+"json",s=r+"md5";function a(){io.request(urlPrefix+"data.json",()=>!l(),t=>{let e=Math.round(50*t),o=50-e;log(n+ANSI.white+"Downloading data "+ANSI.white+"["+ANSI.green+"#".repeat(e)+" ".repeat(o)+ANSI.white+"]"+ANSI.reset+ANSI.black)},t=>{io.writeAll([{path:i,data:t},{path:s,data:calcMD5(t)}],(e,o)=>{o?e.forEach(t=>{t.err&&d("An error occurred writing data to file. Please retry: "+lf+t.path+": "+t.err)}):log(n+ANSI.white+("Updated with "+t.length+" bytes. All systems are GO!").padEnd(72," "))})},t=>d(lf+"An error occurred -"+lf+"Status code: "+t.statusCode+(t.error?lf+"Message: "+t.error:"")))}function l(){log(n+"".padStart(72," "))}function d(t){log(n+ANSI.red+t+ANSI.white)}log("Connecting..."),t?a():serverMD5(t=>{let o=getCachedMD5(s,i);l(),log(n+ANSI.white+(t===o?"No change in data - cancelling (or use the --fupdate option).":"Update is available ("+t+").")),e||t===o||a()})}function serverMD5(t){io.request(urlPrefix+"data.md5",null,null,t,t=>{log("An error occurred:",t.statusCode,t.error)})}function getCachedMD5(t,e){fs||(fs=require("fs"));try{return fs.readFileSync(t)+""}catch(t){return calcFileMD5(e)}}function calcFileMD5(t){fs||(fs=require("fs"));try{return calcMD5(fs.readFileSync(t))+""}catch(t){return""}}function calcMD5(t){return require("crypto").createHash("md5").update(t).digest("hex")+""}function search(t,e){let o,n=buildTable(),r=[];if(t.endsWith(".")){t=i(t).substr(0,t.length-1);for(let e of n){if(i(e).endsWith(t)){r.push(e);break}}}else o=getComparer(i(t)),n.forEach(t=>{let e=i(t);o.test(e)&&isCompat(t)&&r.push(t)});function i(t){return e?t:t.toLowerCase()}return r}function list(t,e){const o=e?t:t.toLowerCase(),n=[];return buildTable().forEach(t=>{(e?t:t.toLowerCase()).startsWith(o)&&!isCompat(t)&&n.push(t)}),1===n.length?Object.keys(getPathAsObject(n[0])||{}):n}function listOnStatus(t){const e=[];function o(e){return!!(e.__compat.status||{})[t]}return listTopLevels().forEach(t=>{let n=mdn[t];n.__compat&&o(n)&&e.push(t),Object.keys(mdn[t]).forEach(n=>{let r=mdn[t][n];r.__compat&&o(r)&&e.push(t+"."+n),Object.keys(mdn[t][n]).forEach(r=>{let i=mdn[t][n][r];r.__compat&&o(i)&&e.push(t+"."+n+"."+r)})})}),e.sort()}function listBrowser(t){const e=mdn.browsers[t],o=[];if(!e)return getBrowserStatusList().includes(t)?listBrowserOnStatus(t):"Unknown browser-id: '"+t+"' - Use '.' to list all valid IDs.";let n=0,r=0;return Object.keys(e.releases).forEach(t=>{let e=t.split(".");e[0].length>n&&(n=e[0].length),t.length-e[0].length>r&&(r=t.length-e[0].length)}),Object.keys(e.releases).sort(function(t,e){let o=t.split("."),n=e.split("."),r=(0|o[0])+1e-4*(0|o[1])+1e-6*(0|o[2])+1e-9*(0|o[3]),i=(0|n[0])+1e-4*(0|n[1])+1e-6*(0|n[2])+1e-9*(0|n[3]);return r>i?1:r<i?-1:0}).forEach(i=>{let s=ANSI.white+t+"  "+ANSI.green+_fBrowserVersion(i,n,r),a=e.releases[i].release_date,l=e.releases[i].status;s+=ANSI.white+"  Rel: "+(a?ANSI.cyan+a:ANSI.gray+"-         "),s+="  "+(l?_browserStatusColor(l)+l+ANSI.white:"-"),o.push(s+ANSI.white)}),o}function listBrowserOnStatus(t){let e=[],o=_browserStatusColor(t),n=_iterateBrowsers((e,o,n)=>{let r=e.release_date;return e.status&&e.status===t?{browser:o,version:n,date:r||"-"}:null}),r=0,i=0,s=0;return n.forEach(t=>{let e=t.version.split(".");t.browser.length>r&&(r=t.browser.length),e[0].length>i&&(i=e[0].length),t.version.length-e[0].length>s&&(s=t.version.length-e[0].length)}),e.push(ANSI.magenta+"STATUS: "+o+t.toUpperCase()+ANSI.white),n.forEach(t=>{e.push(ANSI.white+t.browser.padEnd(r)+ANSI.white+"  "+o+_fBrowserVersion(t.version,i,s)+ANSI.white+"  Rel: "+("-"===t.date?ANSI.gray:ANSI.cyan)+t.date+ANSI.white)}),e}function getBrowserStatusList(){return _iterateBrowsers((t,e,o,n)=>n.includes(t.status)?null:t.status).sort()}function _browserStatusColor(t){return"retired"===t?ANSI.red:"beta"===t||"nightly"===t||"alpha"===t?ANSI.yellow:"current"===t||"esr"===t?ANSI.green:"planned"===t?ANSI.magenta:ANSI.white}function _iterateBrowsers(t){const e=mdn.browsers,o=[];return Object.keys(e).forEach(n=>{Object.keys(e[n].releases).forEach(r=>{let i=t(e[n].releases[r],n,r,o);i&&o.push(i)})}),o}function _fBrowserVersion(t,e,o){let n=t.split(".");return n[0].padStart(e)+n.join(".").substr(n[0].length).padEnd(o)}function compatToLong(t){let e=new Output(0),o=["chrome","edge","firefox","ie","opera","safari"],n=["webview_android","chrome_android","edge_mobile","firefox_android","opera_android","safari_ios"],r=["Â°","Â¹","Â²","Â³","Âª","^","`","'",'"',"'\"",'""','""\'',"Âº"],i=0,s=[],a=" %0----------+-----------+-----------+-----------+-----------+-----------";function l(o){o.forEach(o=>{let n,a=t.getBrowser(o);a?(n=a.info[0].getVersion(),a.hasNotes()&&(n+=ANSI.white+(options.notes?r[i]:"*"),s.push(a.getNotes(r[i])),i=++i%r.length),"?"===n&&(n=ANSI.yellow+"?")):n=ANSI.red+no,e.add("%0"+n.centerAnsi(11)+ANSI.white+"|",n.indexOf(no)>=0?ANSI.red:ANSI.cyan)}),e.trimEnd(1)}return e.addLine(ANSI.reset),options.markdown&&t.url.length?e.addLine(" [`%0%1`](%2) %3"+lf,t.prePath,t.name,t.url,t.getStatus()):(e.addLine(" %0%1%2%3%4 %5",ANSI.yellow,t.prePath,ANSI.cyan,t.name,ANSI.white,t.getStatus()),e.addLine(" ",t.url?t.url:"-",lf)),t.description&&e.addLine(breakLine(cleanHTML(t.description),options.maxWidth),lf),options.mobile||(e.addLine(" %0DESKTOP:",ANSI.yellow),e.addLine(" %0Chrome    %1|%0 Edge      %1|%0 Firefox   %1|%0 IE        %1|%0 Opera     %1|%0 Safari%1",ANSI.green,ANSI.white),e.addLine(a,ANSI.white),l(o),e.addLine(lf),!options.noteend&&options.notes&&s.length&&e.addLine(s.join("")),options.noteend||(s=[],i=0)),options.desktop||(e.addLine(" %0MOBILE:",ANSI.yellow),e.addLine(" %0Webview/A %1|%0 Chrome/A  %1|%0 Edge/mob  %1|%0 Firefox/A %1|%0 Opera/A   %1|%0 Safari/iOS",ANSI.green,ANSI.white),e.addLine(a,ANSI.white),l(n),e.addLine(lf),options.notes&&s.length&&e.addLine(s.join(""))),e.trimEnd(lf.length),e.toString()}function compatToShort(t,e){let o=t.prePath+t.name,n=new Output(0),r=["chrome","edge","firefox","ie","opera","safari"],i=["android","chrome_android","firefox_android","edge_mobile","opera_android","safari_ios"],s=["C:","E:","F:","IE:","O:","S:"],a=["WA:","CA:","FA:","EM:","OA:","Si:"];function l(e,o){e.forEach((e,r)=>{let i,s=t.getBrowser(e);s?(i=s.info[0].getVersion(),s.hasNotes()&&(i+=ANSI.white+"*")):i=ANSI.red+no,n.add(ANSI.green,ANSI.bright,o[r],ANSI.white,i," ")})}return options.shorthandSplit?n.add(o,":",lf):n.add(o.padEnd(e),":"),options.mobile||(n.add("%0  DT: ",ANSI.yellow),l(r,s)),options.desktop||(n.add("%0 MOB: ",ANSI.yellow),l(i,a)),n.trimEnd(1),n.toString()}function compatToSVG(t){const e=new Output,o=["chrome","edge","firefox","ie","opera","safari"],n=["android","chrome,android","edge","firefox,android","opera,android","safari"],r=["Chrome","Edge","Firefox","IE","Opera","Safari"],i=["Webview for Android","Chrome for Android","Edge for mobile","Firefox for Android","Opera for Android","Safari for iOS"],s=["webview_android","chrome_android","edge_mobile","firefox_android","opera_android","safari_ios"],a={desktop:!options.mobile,mobile:!options.desktop,showNotes:!options.noNotes},l=options.width,d=a.mobile,h=a.desktop,c=l-0,p=d&&h?c/2+0:0,f=c/(d&&h?12:6),u=20,g="#E4F7E1",m="#FBE3E3",w=45;let S,A,b=[],v=0,I=1,x=50+2*w;for(e.add('<svg xmlns="http://www.w3.org/2000/svg" %1width="%0">',options.width,t.url.length?'xmlns:xlink="http://www.w3.org/1999/xlink" ':""),e.add("\x3c!-- Made by mdncomp v. "+version+" --\x3e"),(a.desktop||a.mobile)&&(L("chrome","M8.071 13.954l-4.579-7.931c2.932-3.671 7.445-6.023 12.508-6.023 5.857 0 10.978 3.148 13.767 7.844h-13.055c-0.235-0.020-0.472-0.031-0.711-0.031-3.809 0-7.018 2.614-7.929 6.142zM21.728 10.156h9.171c0.711 1.81 1.101 3.781 1.101 5.844 0 8.776-7.066 15.9-15.818 15.998l6.544-11.334c0.921-1.324 1.462-2.932 1.462-4.664 0-2.287-0.943-4.357-2.459-5.844zM10.188 16c0-3.205 2.607-5.813 5.813-5.813s5.813 2.607 5.813 5.813c0 3.205-2.608 5.813-5.813 5.813s-5.813-2.608-5.813-5.813zM18.193 23.889l-4.581 7.934c-7.704-1.153-13.613-7.797-13.613-15.822 0-2.851 0.746-5.526 2.053-7.845l6.532 11.314c1.308 2.785 4.14 4.718 7.415 4.718 0.759 0 1.495-0.104 2.193-0.299z"),L("firefox","M31.954 10.442l-0.371 2.377c0 0-0.53-4.402-1.179-6.047-0.995-2.521-1.438-2.501-1.441-2.498 0.667 1.694 0.546 2.604 0.546 2.604s-1.181-3.219-4.303-4.243c-3.459-1.134-5.33-0.824-5.547-0.765-0.033-0-0.064-0-0.095-0 0.026 0.002 0.050 0.005 0.076 0.007-0.001 0.001-0.003 0.001-0.003 0.002 0.014 0.017 3.822 0.666 4.497 1.594 0 0-1.617 0-3.227 0.464-0.073 0.021 5.923 0.749 7.148 6.74 0 0-0.657-1.371-1.47-1.604 0.535 1.626 0.397 4.712-0.112 6.245-0.066 0.197-0.133-0.853-1.135-1.305 0.321 2.301-0.019 5.952-1.616 6.957-0.124 0.078 1.001-3.603 0.226-2.18-4.46 6.838-9.731 3.155-12.101 1.535 1.215 0.264 3.52-0.041 4.541-0.8 0.001-0.001 0.002-0.002 0.004-0.003 1.108-0.758 1.765-1.311 2.354-1.18s0.982-0.46 0.524-0.985c-0.459-0.526-1.572-1.249-3.079-0.855-1.063 0.278-2.379 1.454-4.389 0.264-1.543-0.914-1.688-1.673-1.702-2.199 0.038-0.186 0.086-0.361 0.143-0.52 0.178-0.496 0.716-0.646 1.015-0.764 0.508 0.087 0.946 0.246 1.405 0.481 0.006-0.153 0.008-0.356-0.001-0.586 0.044-0.088 0.017-0.352-0.054-0.674-0.041-0.322-0.107-0.655-0.211-0.959 0-0 0.001-0 0.001-0 0.002-0.001 0.003-0.001 0.005-0.002s0.005-0.004 0.007-0.006c0-0.001 0.001-0.001 0.001-0.002 0.003-0.004 0.005-0.008 0.006-0.015 0.032-0.144 0.376-0.423 0.804-0.722 0.383-0.268 0.834-0.553 1.19-0.774 0.314-0.195 0.554-0.34 0.605-0.378 0.019-0.015 0.042-0.032 0.068-0.051 0.005-0.004 0.009-0.007 0.014-0.011 0.003-0.002 0.006-0.005 0.009-0.007 0.169-0.135 0.421-0.389 0.474-0.924 0-0.001 0-0.002 0-0.004 0.002-0.016 0.003-0.032 0.004-0.048 0.001-0.011 0.002-0.023 0.002-0.034 0-0.009 0.001-0.018 0.001-0.027 0.001-0.021 0.002-0.043 0.002-0.065 0-0.001 0-0.002 0-0.004 0.001-0.052-0-0.106-0.003-0.163-0.002-0.032-0.004-0.060-0.009-0.086-0-0.001-0.001-0.003-0.001-0.004-0.001-0.003-0.001-0.005-0.002-0.008-0.001-0.005-0.002-0.009-0.004-0.013-0-0.001-0-0.001-0.001-0.001-0.002-0.005-0.004-0.010-0.005-0.014-0-0-0-0-0-0.001-0.055-0.128-0.26-0.177-1.108-0.191-0.001-0-0.002-0-0.002-0v0c-0.346-0.006-0.798-0.006-1.391-0.004-1.039 0.004-1.613-1.016-1.797-1.41 0.251-1.389 0.977-2.379 2.17-3.051 0.023-0.013 0.018-0.023-0.009-0.031 0.233-0.141-2.82-0.004-4.225 1.782-1.247-0.31-2.333-0.289-3.269-0.069-0.18-0.005-0.404-0.027-0.67-0.083-0.623-0.564-1.514-1.606-1.562-2.85 0 0-0.003 0.002-0.008 0.006-0.001-0.012-0.002-0.024-0.002-0.036 0 0-1.897 1.458-1.613 5.434-0.001 0.064-0.002 0.125-0.004 0.184-0.514 0.696-0.768 1.282-0.787 1.411-0.455 0.926-0.917 2.32-1.292 4.437 0 0 0.263-0.833 0.79-1.777-0.388 1.188-0.693 3.036-0.514 5.808 0 0 0.047-0.615 0.215-1.5 0.131 1.719 0.704 3.841 2.152 6.337 2.78 4.791 7.052 7.211 11.775 7.582 0.839 0.069 1.689 0.071 2.544 0.006 0.079-0.006 0.157-0.011 0.236-0.018 0.968-0.068 1.942-0.214 2.914-0.449 13.287-3.212 11.842-19.256 11.842-19.256z"),L("edge","M0.481 14.206c0.938-7.4 5.987-14.113 15.037-14.206 5.463 0.106 9.956 2.581 12.631 7.3 1.344 2.462 1.762 5.050 1.85 7.906v3.356h-20.081c0.094 8.281 12.188 8 17.394 4.35v6.744c-3.050 1.831-9.969 3.469-15.325 1.363-4.563-1.712-7.813-6.488-7.794-11.081-0.15-5.956 2.962-9.9 7.794-12.144-1.025 1.269-1.806 2.669-2.213 5.094h11.338c0 0 0.663-6.775-6.419-6.775-6.675 0.231-11.488 4.112-14.213 8.094v0z"),L("opera","M32 16v0 0c0 4.738-2.063 9-5.337 11.925-4.106 2-7.931 0.6-9.194-0.275 4.031-0.881 7.075-5.756 7.075-11.65s-3.044-10.769-7.075-11.656c1.269-0.875 5.094-2.275 9.194-0.275 3.275 2.931 5.337 7.194 5.337 11.931v0 0z","M10.731 6.981c-1.769 2.087-2.912 5.175-2.987 8.644 0 0.006 0 0.744 0 0.756 0.075 3.462 1.225 6.55 2.994 8.637 2.294 2.981 5.706 4.869 9.519 4.869 2.344 0 4.538-0.712 6.413-1.956-2.837 2.531-6.575 4.069-10.669 4.069-0.256 0-0.512-0.006-0.762-0.019-8.481-0.4-15.238-7.4-15.238-15.981 0-8.838 7.162-16 16-16 0.019 0 0.038 0 0.063 0 4.075 0.013 7.787 1.55 10.606 4.075-1.875-1.244-4.069-1.962-6.413-1.962-3.813 0-7.225 1.887-9.525 4.869z"),L("ie","M22.944 19.651h7.377c0.057-0.512 0.080-1.034 0.080-1.569 0-2.507-0.673-4.858-1.848-6.883 1.215-3.228 1.172-5.968-0.455-7.606-1.547-1.54-5.697-1.29-10.388 0.787-0.347-0.026-0.697-0.040-1.051-0.040-6.439 0-11.841 4.431-13.335 10.402 2.020-2.586 4.145-4.461 6.984-5.826-0.258 0.242-1.764 1.739-2.018 1.993-7.486 7.484-9.847 17.26-7.306 19.8 1.931 1.93 5.43 1.604 9.449-0.364 1.869 0.952 3.984 1.488 6.226 1.488 6.035 0 11.15-3.885 13.003-9.295h-7.433c-1.023 1.887-3.023 3.171-5.319 3.171s-4.296-1.284-5.319-3.171c-0.455-0.852-0.716-1.83-0.716-2.864v-0.023h12.071zM10.884 16.025c0.171-3.035 2.694-5.456 5.774-5.456s5.604 2.421 5.774 5.456h-11.548zM28.030 5.119c1.048 1.059 1.021 3.007 0.125 5.438-1.535-2.341-3.766-4.186-6.4-5.239 2.816-1.207 5.106-1.367 6.274-0.199zM2.921 30.227c-1.337-1.337-0.934-4.144 0.788-7.526 1.072 3.008 3.161 5.534 5.854 7.161-2.982 1.354-5.423 1.584-6.643 0.365z"),L("safari","M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM3 16c0-7.18 5.82-13 13-13 3.424 0 6.538 1.325 8.86 3.488l-12.86 5.512-5.512 12.86c-2.164-2.322-3.488-5.436-3.488-8.86zM18.286 18.286l-8.003 3.43 3.43-8.003 4.573 4.573zM16 29c-3.424 0-6.539-1.325-8.86-3.488l12.86-5.512 5.512-12.86c2.164 2.322 3.488 5.436 3.488 8.86 0 7.18-5.82 13-13 13z")),a.desktop&&L("desktop","M0 2v20h32v-20h-32zM30 20h-28v-16h28v16zM21 24h-10l-1 4-2 2h16l-2-2z"),a.mobile&&(L("mobile","M24 0h-18c-1.1 0-2 0.9-2 2v28c0 1.1 0.9 2 2 2h18c1.1 0 2-0.9 2-2v-28c0-1.1-0.9-2-2-2zM15 30.556c-0.859 0-1.556-0.697-1.556-1.556s0.697-1.556 1.556-1.556 1.556 0.697 1.556 1.556-0.697 1.556-1.556 1.556zM24 26h-18v-22h18v22z"),L("android","M28 12c-1.1 0-2 0.9-2 2v8c0 1.1 0.9 2 2 2s2-0.9 2-2v-8c0-1.1-0.9-2-2-2zM4 12c-1.1 0-2 0.9-2 2v8c0 1.1 0.9 2 2 2s2-0.9 2-2v-8c0-1.1-0.9-2-2-2zM7 23c0 1.657 1.343 3 3 3v0 4c0 1.1 0.9 2 2 2s2-0.9 2-2v-4h4v4c0 1.1 0.9 2 2 2s2-0.9 2-2v-4c1.657 0 3-1.343 3-3v-11h-18v11z","M24.944 10c-0.304-2.746-1.844-5.119-4.051-6.551l1.001-2.001c0.247-0.494 0.047-1.095-0.447-1.342s-1.095-0.047-1.342 0.447l-1.004 2.009-0.261-0.104c-0.893-0.297-1.848-0.458-2.84-0.458s-1.947 0.161-2.84 0.458l-0.261 0.104-1.004-2.009c-0.247-0.494-0.848-0.694-1.342-0.447s-0.694 0.848-0.447 1.342l1.001 2.001c-2.207 1.433-3.747 3.805-4.051 6.551v1h17.944v-1h-0.056zM13 8c-0.552 0-1-0.448-1-1s0.447-0.999 0.998-1c0.001 0 0.002 0 0.003 0s0.001-0 0.002-0c0.551 0.001 0.998 0.448 0.998 1s-0.448 1-1 1zM19 8c-0.552 0-1-0.448-1-1s0.446-0.999 0.998-1c0 0 0.001 0 0.002 0s0.002-0 0.003-0c0.551 0.001 0.998 0.448 0.998 1s-0.448 1-1 1z")),t.hasFlags()&&L("flag","M0 0h4v32h-4v-32z","M26 20.094c2.582 0 4.83-0.625 6-1.547v-16c-1.17 0.922-3.418 1.547-6 1.547s-4.83-0.625-6-1.547v16c1.17 0.922 3.418 1.547 6 1.547z","M19 1.016c-1.466-0.623-3.61-1.016-6-1.016-3.012 0-5.635 0.625-7 1.547v16c1.365-0.922 3.988-1.547 7-1.547 2.39 0 4.534 0.393 6 1.016v-16z"),t.standard&&L("html5","M1.892 0l2.567 28.801 11.524 3.199 11.554-3.204 2.572-28.796h-28.216zM24.52 9.42h-13.517l0.322 3.617h12.874l-0.97 10.844-7.245 2.008-7.237-2.008-0.495-5.547h3.547l0.252 2.82 3.933 1.060 0.009-0.002 3.935-1.062 0.408-4.58h-12.242l-0.953-10.681h17.694l-0.316 3.532z"),t.deprecated&&L("thumb","M17 5c-0.755 0-1.438 0.289-1.965 0.751-0.064-0.062-0.116-0.14-0.188-0.192-0.96-0.737-3.665-1.559-5.847-1.559-1.879 0-2.607 0.293-3.252 0.552-0.103 0.042-0.207 0.085-0.316 0.124-0.834 0.305-1.578 1.229-1.738 2.2l-0.664 5.972c-0.174 1.039 0.441 2.127 1.4 2.478 0.394 0.144 2.512 0.405 3.883 0.56-0.215 1.256-0.312 2.405-0.312 3.616 0 1.379 1.121 2.5 2.5 2.5s2.5-1.121 2.5-2.5c0-1.875 0.667-2.737 1.616-3.699 0.548 0.724 1.408 1.199 2.384 1.199 1.653 0 2.999-1.347 2.999-3v-6c-0.001-1.656-1.346-3.002-3-3.002zM11 19.5c0 0.275-0.225 0.5-0.5 0.5s-0.5-0.225-0.5-0.5c0-1.805 0.256-3.241 0.479-4.293l0.297-1.398-1.321 0.188c-0.605-0.050-3.934-0.447-4.335-0.552-0.058-0.028-0.132-0.18-0.108-0.321l0.663-5.976c0.037-0.223 0.291-0.539 0.443-0.594 0.131-0.049 0.254-0.099 0.377-0.146 0.544-0.219 1.015-0.408 2.506-0.408 1.914 0 4.118 0.753 4.633 1.146 0.156 0.12 0.366 0.564 0.366 0.854v4.977c-0.001 0.026-0.040 0.649-0.707 1.316-0.913 0.913-2.293 2.293-2.293 5.207zM18 14c0 0.552-0.448 1-1 1s-1-0.448-1-1v-6c0-0.552 0.448-1 1-1s1 0.448 1 1v6z"),t.experimental&&L("lab","M29.884 25.14l-9.884-16.47v-6.671h1c0.55 0 1-0.45 1-1s-0.45-1-1-1h-10c-0.55 0-1 0.45-1 1s0.45 1 1 1h1v6.671l-9.884 16.47c-2.264 3.773-0.516 6.86 3.884 6.86h20c4.4 0 6.148-3.087 3.884-6.86zM7.532 20l6.468-10.779v-7.221h4v7.221l6.468 10.779h-16.935z"),t.url.length&&L("link","M6 2v24h24v-24h-24zM28 24h-20v-20h20v20zM4 28v-21l-2-2v25h25l-2-2h-21z","M11 8l5 5-6 6 3 3 6-6 5 5v-13z"),t.url.length?(e.add('<a xlink:href="%0" style="cursor:pointer" target="_blank">',t.url),O(t.prePath,t.name,1,50,32),k("link",l-40,26,24,24,"#777"),e.add("</a>")):O(t.prePath,t.name,u,50,32),t.deprecated&&N("thumb","Deprecated",24,"#a00"),t.experimental&&N("lab","Experimental",0,"#c70"),t.standard&&N("html5","On standard track",0,"#070"),e.add('<g transform="translate(0, 104)">'),E(0,0,l,x,"#eaedf2"),a.desktop&&y(o,r,0,50+w),a.mobile&&y(s,i,p,50+w),A=0;A<l;A+=f)M(0|A,50,0|A,x,1,"#999");if(d&&M(p,0,p,x,2),M(0,50,l,50,2),M(0,50+w,l,50+w,1),M(0,x,l,x,2),h)for(k("desktop",((d?c/2:c)-20)/2+0,15,20,20),S=0,A=0;S<o.length;S++)k(o[S],A+f*S+(f-20)/2,50+(w-20)/2,20,20,"#676769",r[S]);if(d)for(k("mobile",((h?c/2:c)-20)/2+p,15,20,20),S=0,A=p;S<n.length;S++){let t=n[S].split(",");t.forEach((e,o)=>{k(e,(2===t.length?o?1.5:-1.5:0)+A+20*o+f*S+(f-20*t.length)/2,50+(w-20)/2,20,20,"#676769",i[S])})}function y(e,o,n,r){options.maxWidth=(l-60)/8,e.forEach((e,o)=>{let i,s,a,d,h=t.getBrowser(e),c=n+f*o,p=c+.5*f;if(h){if(a=h.hasFlags(),d=h.hasPrefix(),i=h.info[0].getVersion().replace("Y",yes16),h.hasNotes()){s=options.notes?++v:"*";let t=h.getNotes(v);t=(t+"").ansiFree().replace(/</g,"&lt;").replace(/>/g,"&gt;"),b.push(t)}}else i=no;E(c,r,f,w,i.indexOf("-")>=0?m:"?"===i?"#eaedf2":g),"-"===i?_(no16,p,r+28,0,0,"#c55","middle"):_(i,p,r+28,l<800?12:0,0,i.indexOf("-")<0&&i.indexOf("?")<0?"#070":"#000","middle"),s&&_(s,c+f-12,r+13,10,"#000","end"),a&&k("flag",c+5,r+5,10,10,"#555"),d&&_(h.prefix,c+5,r+41,12,!1,"#334")})}function N(t,e,o,n){o=o||14;t&&(k(t,I,69+(14===o?2:1),o,o,n),I+=20),_(e,I,84,16,!0,n),I+=105}function M(t,o,n,r,i,s){i/2!=i>>>1&&(t+=.5,o+=.5,n+=.5,r+=.5),e.add('<line x1="%0" y1="%1" x2="%2" y2="%3"  stroke="%5" stroke-width="%4" />',t,o,n,r,i||1,s||"#000")}function E(t,o,n,r,i,s){e.add('<rect x="%0" y="%1" width="%2" height="%3" fill="%4"%5 />',t,o,n,r,i,s?' title="'+s+'"':"")}function _(t,o,n,r,i,s,a){a=a?' text-anchor="'+a+'" ':"",e.add('<text x="%1" y="%2" fill="%5" %6font-family="%4" font-size="%3">%0</text>',t,o,n,r||16,i?"sans-serif":"Consolas, monospace",s||"#000",a)}function O(t,o,n,r,i){e.add('<text x="%2" y="%3" font-family="Consolas, monospace" font-size="%4"><tspan fill="#777">%0</tspan><tspan fill="#000">%1</tspan>',t,o,n,r,i||16),e.add("</text>")}function k(t,o,n,r,i,s,a){s=s?' fill="'+s+'"':"",a&&e.add("<g><title>%0</title>",a),arguments.length>3?e.add('<use href="#icon-%0" x="%1" y="%2" width="%3" height="%4"%5></use>',t,o,n,r,i,s):e.add('<use href="#icon-%0" width="%1" height="%2"%3></use>',t,o,n,s),a&&e.add("</g>")}function L(t,o){e.add('<symbol id="icon-%0" viewBox="-1 -1 34 34">',t);for(let t=1;t<arguments.length;t++)e.add('<path d="%0"></path>',arguments[t]);e.add("</symbol>")}return options.notes&&b.length&&(x+=16,b.forEach(t=>{!function(t){let e=t.split(lf),o=new Output;e.forEach(t=>{o.add('<tspan x="%0" dy="1.3em">',u),o.add(t),o.add("</tspan>")}),_(o.toString(),10,x,14),x+=15*e.length}(t)})),_('Data from MDN - "npm i -g mdncomp" by epistemex Â© 2018.',1,x+=45,14,!0,"#777"),e.add("</g></svg>"),e.toString()}function MDNComp(t){let e=getPathAsObject(t).__compat,o=["webview_android","chrome","chrome_android","edge","edge_mobile","firefox","firefox_android","ie","opera","opera_android","safari","safari_ios"],n=[!1,!0,!1,!0,!1,!0,!1,!0,!0,!1,!0,!1],r=e.status||{},i=Object.keys(e.support);this.path=t,this.prePath=prePathFromPath(t),this.name=nameFromPath(t),this.url=e.mdn_url||"",this.experimental=r.experimental,this.standard=r.standard_track,this.deprecated=r.deprecated,this.browsers=[],this.description=e.description,i.forEach(t=>{let r=o.indexOf(t);if(r>=0){let o=new Browser(e,t);o.isDesktop=n[r],this.browsers.push(o)}})}function Info(t){this.added=this.toStatus(t.version_added),this.removed=this.toStatus(t.version_removed),this.notes=t.notes?Array.isArray(t.notes)?t.notes:[t.notes]:[],this.flags=t.flags||[],t.prefix&&this.notes.unshift("Prefix: "+t.prefix),t.partial_implementation&&this.notes.unshift("Is partial implementation."),t.alternative_name&&this.notes.unshift("Uses a non-standard name: "+t.alternative_name),this.flags.forEach(t=>{this.notes.push(this.flagToString(t))})}function Browser(t,e){this.name=e,this.info=[];let o=t.support[e];Array.isArray(o)||(o=[o]),this.prefix=(o[o.length-1]||{}).prefix||"",o.forEach(t=>{this.info.push(new Info(t))})}function Output(t){this.string="",this.indent="    ".substr(0,0|t),this.linefeed=lf}MDNComp.prototype={getBrowser:function(t){for(let e of this.browsers)if(e.name===t)return e;return null},getStatus:function(){let t="(";return this.experimental&&(t+=ANSI.yellow+"EXPERIMENTAL"+ANSI.reset+", "),this.deprecated&&(t+=ANSI.red+"DEPRECATED"+ANSI.reset+", "),this.standard&&(t+=ANSI.green+"On Standard Track"+ANSI.reset+", "),"()"===(t=t.substr(0,Math.max(1,t.length-2))+")")?"":t},hasFlags:function(){for(let t of this.browsers)if(t.hasFlags())return!0;return!1}},Info.prototype={getVersion:function(){return this.removed?this.added+"-"+this.removed.replace("Y","?"):this.added},flagToString:function(t){switch(t.type){case"preference":return e("Behind flag "+ANSI.cyan);case"compile_flag":return e("Compile with "+ANSI.cyan);case"runtime_flag":return e("Run with "+ANSI.cyan)}function e(e){return e+t.name+ANSI.white+(t.value_to_set?" set to "+t.value_to_set:"")+"."}return""},toString:function(t){let e=(t?t+") ":"")+(isNaN(this.added)?"":this.getVersion()+": "),o="",n=new Output(0),r=!1;return this.notes.length>1&&(e+=lf,o="- "),this.notes.forEach(t=>{r=!0,n.addLine(breakLine(cleanHTML(o+t,!0),options.maxWidth))}),r?e+n.toString():""},toStatus:function(t){return"boolean"==typeof t?t?"Y":no:null===t?"?":t||null}},Browser.prototype={hasNotes:function(){for(let t of this.info)if(t.notes.length)return!0;return!1},hasFlags:function(){for(let t of this.info)if(t.flags.length)return!0;return!1},hasPrefix:function(){return this.prefix.length},getNotes:function(t){let e=new Output(0);return this.info.forEach(o=>{e.add(o.toString(t))}),e.toString()}},Output.prototype={add:function(t){if(t=t||"",arguments.length>1){let e=t.indexOf("%0")>=0;for(let o=1;o<arguments.length;o++){let n=new RegExp("%"+(o-1),"g");t=e?t.replace(n,arguments[o]):t+arguments[o]}}this.string+=this.indent+(t||"")},addLine:function(t){this.add.apply(this,arguments),this.string+=this.linefeed},trimEnd:function(t){this.string=this.string.substr(0,Math.max(0,this.string.length-t))},replace:function(t,e){let o=new RegExp(t,"g");this.string=this.string.replace(o,e)},toString:function(){return this.string}};