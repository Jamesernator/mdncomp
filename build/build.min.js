/*!
	mdncomp (version: see package.json)
	Copyright (c) 2018 Epistemex
	www.epistemex.com
*/
"use strict";module.exports=init;const ANSI={reset:"[0m",bright:"[1m",dim:"[2m",clrToCursor:"[1K",cursorUp:"[1A",black:"[30m",red:"[31;1m",green:"[32;1m",yellow:"[33;1m",blue:"[34m",magenta:"[35;2m",cyan:"[36;1m",white:"[37;1m",gray:"[30;1m"},lf="\r\n",yes="Y",no="-",yes16="âœ”",no16="âœ˜",saves=[],version=require("../package.json").version,args=process.argv,log=console.log.bind(console),urlPrefix="https://raw.githubusercontent.com/epistemex/data-for-mdncomp/master/";let mdn,options,https,fs,shortPad=1;function buildTable(){const e=[];return listTopLevels().forEach(t=>{"browsers"!==t&&function t(o,n,r){const s=o[n];"object"==typeof s&&Object.keys(s).forEach(o=>{"__compat"!==o&&(e.push(r+"."+o),t(s,o,r+"."+o))})}(mdn,t,t)}),e}function listTopLevels(){let e=Object.keys(mdn),t=e.indexOf("browsers");return t>=0&&e.splice(t,1),e}function listBrowsers(){return Object.keys(mdn.browsers)}function getComparer(e){let t,o,n="";e.startsWith("/")?(e=(o=(e=e.substr(1)).split("/"))[0],n=o[1]):(e.startsWith("*")||(e="*"+e),e.endsWith("*")||(e+="*"),e="^"+e.split("*").join(".*")+"$");try{t=new RegExp(e,n)}catch(e){log("Invalid regular expression:",e.message),process.exit(-1)}return t}function getPathAsObject(e,t){let o=e.split("."),n=mdn;return o.forEach(e=>{n&&n[e]&&(n=n[e])}),t&&Object.keys(n).forEach(e=>{n&&n[e].__compat&&delete n[e]}),n}function nameFromPath(e){let t=getExt(e);return t.length?t:e}function getExt(e){let t=e.lastIndexOf(".");return t<0?"":e.substr(++t)}function prePathFromPath(e){let t=e.split("."),o=mdn,n="";return t.pop(),t.forEach(e=>{o&&(o[e].__compat&&(n+=e+"."),o=o[e])}),n.length>1?n:""}function isCompat(e){let t=getPathAsObject(e);return!!t&&"object"==typeof t.__compat}function cleanHTML(e,t){return e=(e=e.replace(/<code>/gi,ANSI.cyan).replace(/<\/code>/gi,ANSI.white)).replace(/(<([^>]+)>)/gi,""),t&&(e=e.replace(/&lt;/gi,"<").replace(/&gt;/gi,">")),e}function breakLine(e,t){let o,n=new Output(0),r=Math.max(62,t>>>0||72),s=e.substr(0,r);for(;s.length===r;)(o=s.lastIndexOf(" "))<0&&(o=r),n.addLine(s.substr(0,o).trim()),s=(e=e.substr(o)).substr(1,r);return n.add(s.trim()),n.toString()}function indent(e){let t="",o=0;for(let r of e)","===r||"{"===r?("{"===r&&o++,t+=r+n()):"}"===r?(o--,t+=n()+r):t+=":"===r?r+" ":r;function n(){return lf+"  ".repeat(o)}return t}function getMaxLength(e){let t=0;return e.forEach(e=>{let o=(prePathFromPath(e)+nameFromPath(e)).length;o>t&&(t=o)}),t}function init(){3!==args.length||"--update"!==args[2]&&"--fupdate"!==args[2]&&"--cupdate"!==args[2]?((options=require("commander")).version(version,"-v, --version").usage("[options] <feature>").description("Get MDN Browser Compatibility data."+lf+"  Version: "+version+lf+"  (c) 2018 epistemex.com").option("-l, --list","List paths starting with the given value or '.' for top-level").option("-o, --out <path>","Save information to file. Extension for type, or --type.").option("-t, --type <type>","Output format (ansi, txt, svg)","ansi").option("-x, --overwrite","Overwrites an existing file with --out option.").option("-d, --desktop","Show desktop only").option("-m, --mobile","Show mobile devices only").option("-c, --case-sensitive","Search in case-sensitive mode").option("-a, --show-all","If search results in more than entry, show info for all.").option("-i, --index <index>","Show this index from a multiple result list.",-1).option("-s, --shorthand","Show compatibility as shorthand with multiple results").option("-h, --shorthand-split","Split a shorthand line into two lines (use with -s)").option("-b, --no-colors","Don't use colors in output").option("--max-chars <width>","Max number of chars per line before wrap.",72).option("-N, --no-notes","Don't show notes").option("-e, --noteend","Show notes (-n) at end instead of in sections (text)").option("-f, --markdown","Format link as markdown and turns off colors.").option("-w, --width <width>","Used with -o, Set width of image",800).option("--browser","Show information about this browser, or if '.' list.").option("--raw","Output the raw JSON data.").option("--update, --fupdate, --cupdate","Update BCD from remote (--fupdate=force, --cupdate=check).").action(go).on("--help",()=>{log(),log("  Examples:"),log("    mdncomp arcTo                   show information for arcTo"),log("    mdncomp toblob.                 will find HTMLCanvasElement.toBlob"),log("    mdncomp --list .                list all top-levels"),log("    mdncomp blob*der -o info.svg    export as svg"),log()}).parse(args),options.args.length||options.help()):update("--fupdate"===args[2],"--cupdate"===args[2])}function outInfo(e){Array.isArray(e)&&(e=e.join(lf)),log(e)}function outStore(e,t){Array.isArray(e)&&(e=e.join(lf)),t||!options.out?log(e):saves.push(e)}function go(e){if(mdn=require("../data/data.json"),options.out&&"ansi"===options.type&&(options.type=getExt(options.out||".txt")),options.desktop&&options.mobile&&(options.desktop=options.mobile=!1),options.colors&&!options.markdown&&"txt"!==options.type||Object.keys(ANSI).forEach(e=>{ANSI[e]=""}),options.list)"."===e?outInfo(listTopLevels()):["deprecated","experimental"].indexOf(e)>=0?outInfo(listOnStatus(e)):outInfo(list(e,options.caseSensitive));else if(options.browser)"."===e?(outInfo(listBrowsers()),outInfo(lf+"Valid statuses:"),outInfo(ANSI.green+getBrowserStatusList().join(", ")+ANSI.white+ANSI.reset)):outInfo(listBrowser(e.toLowerCase()));else{let t=search(e,options.caseSensitive);if(t.length)if(1===t.length||options.index>=0&&options.index<t.length||options.showAll&&("svg"!==options.type||options.raw))options.shorthand&&(shortPad=getMaxLength(t)),options.index>=0&&options.index<t.length&&(t=t.splice(options.index,1)),t.forEach(e=>{!function(e){let t=new MDNComp(e);options.raw?outInfo(indent(JSON.stringify(getPathAsObject(t.path,!0)))):"svg"===options.type?outStore(compatToSVG(t)):outStore(options.shorthand?compatToShort(t,shortPad):compatToLong(t))}(e)}),"svg"!==options.type&&outStore(ANSI.magenta+"Data from MDN - `npm i -g mdncomp` by epistemex"+ANSI.white+lf+ANSI.reset),function(){let e;if(options.out&&saves.length)if((e=require("fs")).existsSync(options.out)&&!options.overwrite){const e=require("readline"),o=e.createInterface({input:process.stdin,output:process.stdout});o.question(ANSI.yellow+"A file exist with this name. Overwrite (y, default no)? "+ANSI.white,e=>{"y"===e.toLowerCase()||"yes"===e.toLowerCase()?t(function(){o.close()}):(log("File not saved."),o.close())})}else t();function t(t){e.writeFile(options.out,saves.join("\n"),"utf8",function(e){if(e)return log("An error occurred:"+lf+e);log('Saved output to file "'+options.out+'"!'),t&&t()})}}();else{let e=(t.length+"").length;t.forEach((t,o)=>{outInfo(ANSI.yellow+"["+ANSI.green+(o+"").padStart(e)+ANSI.yellow+"] "+ANSI.white+t+ANSI.reset)})}else outInfo("Not found.")}}String.prototype.centerAnsi=function(e){let t=e-this.ansiLength()>>>1,o=" ".repeat(t)+this+" ".repeat(t);return" ".substr(0,e-o.ansiLength())+o},String.prototype.ansiLength=function(){return this.ansiFree().length},String.prototype.ansiFree=function(){return this.replace(/\x1b[^m]*m/g,"")};const io={request:function(e,t,o,n,r){function s(e,t){r?r({statusCode:e.statusCode,error:t}):log("Error",e,t)}https||(https=require("https")),t=t||function(){return!0},https.get(e,e=>{let i="";if(200===e.statusCode&&t({headers:e.headers})){let t=0|e.headers["content-length"];e.on("data",e=>{i+=e,o&&o(t?i.length/t:i.length%7/7)}).on("end",()=>{n(i)})}else r&&s(e,"")}).on("error",e=>s(res,e))},writeAll:function(e,t){let o=[],n=e.length,r=!1;fs||(fs=require("fs"));for(let t of e)fs.writeFile(t.path,t.data,"utf8",e=>{s({path:t.path,err:e})});function s(e){o.push(e),e.err&&(r=!0),--n||t(o,r)}}};function update(e,t){const o=require("path"),n=ANSI.clrToCursor+ANSI.cursorUp,r=o.normalize(o.dirname(process.mainModule.filename)+"/../data/data."),s=r+"json",i=r+"md5";function a(){io.request(urlPrefix+"data.json",()=>!l(),e=>{let t=Math.round(50*e),o=50-t;log(n+ANSI.white+"Downloading data "+ANSI.white+"["+ANSI.green+"#".repeat(t)+" ".repeat(o)+ANSI.white+"]"+ANSI.reset+ANSI.black)},e=>{io.writeAll([{path:s,data:e},{path:i,data:calcMD5(e)}],(t,o)=>{o?t.forEach(e=>{e.err&&d("An error occurred writing data to file. Please retry: "+lf+e.path+": "+e.err+ANSI.reset)}):log(n+ANSI.white+("Updated with "+e.length+" bytes. All systems are GO!").padEnd(72," ")+ANSI.reset)})},e=>d(lf+"An error occurred -"+lf+"Status code: "+e.statusCode+(e.error?lf+"Message: "+e.error:"")+ANSI.reset))}function l(){log(n+"".padStart(72," "))}function d(e){log(n+ANSI.red+e+ANSI.white)}log("Connecting..."),e?a():serverMD5(e=>{let o=getCachedMD5(i,s);l(),log(n+ANSI.white+(e===o?"No change in data - cancelling (or use the --fupdate option).":"Update is available ("+e+").")),t||e===o||a()})}function serverMD5(e){io.request(urlPrefix+"data.md5",null,null,e,e=>{log("An error occurred:",e.statusCode,e.error)})}function getCachedMD5(e,t){fs||(fs=require("fs"));try{return fs.readFileSync(e)+""}catch(e){return calcFileMD5(t)}}function calcFileMD5(e){fs||(fs=require("fs"));try{return calcMD5(fs.readFileSync(e))+""}catch(e){return""}}function calcMD5(e){return require("crypto").createHash("md5").update(e).digest("hex")+""}function search(e,t){let o,n=buildTable(),r=[];if(e.endsWith(".")){e=s(e).substr(0,e.length-1);for(let t of n){if(s(t).endsWith(e)){r.push(t);break}}}else o=getComparer(s(e)),n.forEach(e=>{let t=s(e);o.test(t)&&isCompat(e)&&r.push(e)});function s(e){return t?e:e.toLowerCase()}return r}function list(e,t){const o=t?e:e.toLowerCase(),n=[];return buildTable().forEach(e=>{(t?e:e.toLowerCase()).startsWith(o)&&!isCompat(e)&&n.push(e)}),1===n.length?Object.keys(getPathAsObject(n[0])||{}):n}function listOnStatus(e){const t=[];function o(t){return!!(t.__compat.status||{})[e]}return listTopLevels().forEach(e=>{let n=mdn[e];n.__compat&&o(n)&&t.push(e),Object.keys(mdn[e]).forEach(n=>{let r=mdn[e][n];r.__compat&&o(r)&&t.push(e+"."+n),Object.keys(mdn[e][n]).forEach(r=>{let s=mdn[e][n][r];r.__compat&&o(s)&&t.push(e+"."+n+"."+r)})})}),t.sort()}function listBrowser(e){const t=mdn.browsers[e],o=[];if(!t)return getBrowserStatusList().includes(e)?listBrowserOnStatus(e):"Unknown browser-id: '"+e+"' - Use '.' to list all valid IDs.";let n=0,r=0;return Object.keys(t.releases).forEach(e=>{let t=e.split(".");t[0].length>n&&(n=t[0].length),e.length-t[0].length>r&&(r=e.length-t[0].length)}),Object.keys(t.releases).sort(function(e,t){let o=e.split("."),n=t.split("."),r=(0|o[0])+1e-4*(0|o[1])+1e-6*(0|o[2])+1e-9*(0|o[3]),s=(0|n[0])+1e-4*(0|n[1])+1e-6*(0|n[2])+1e-9*(0|n[3]);return r>s?1:r<s?-1:0}).forEach(s=>{let i=ANSI.white+e+"  "+ANSI.green+_fBrowserVersion(s,n,r),a=t.releases[s].release_date,l=t.releases[s].status;i+=ANSI.white+"  Rel: "+(a?ANSI.cyan+a:ANSI.gray+"-         "),i+="  "+(l?_browserStatusColor(l)+l+ANSI.white:"-"),o.push(i+ANSI.white)}),o}function listBrowserOnStatus(e){let t=[],o=_browserStatusColor(e),n=_iterateBrowsers((t,o,n)=>{let r=t.release_date;return t.status&&t.status===e?{browser:o,version:n,date:r||"-"}:null}),r=0,s=0,i=0;return n.forEach(e=>{let t=e.version.split(".");e.browser.length>r&&(r=e.browser.length),t[0].length>s&&(s=t[0].length),e.version.length-t[0].length>i&&(i=e.version.length-t[0].length)}),t.push(ANSI.magenta+"STATUS: "+o+e.toUpperCase()+ANSI.white),n.forEach(e=>{t.push(ANSI.white+e.browser.padEnd(r)+ANSI.white+"  "+o+_fBrowserVersion(e.version,s,i)+ANSI.white+"  Rel: "+("-"===e.date?ANSI.gray:ANSI.cyan)+e.date+ANSI.white)}),t}function getBrowserStatusList(){return _iterateBrowsers((e,t,o,n)=>n.includes(e.status)?null:e.status).sort()}function _browserStatusColor(e){return"retired"===e?ANSI.red:"beta"===e||"nightly"===e||"alpha"===e?ANSI.yellow:"current"===e||"esr"===e?ANSI.green:"planned"===e?ANSI.magenta:ANSI.white}function _iterateBrowsers(e){const t=mdn.browsers,o=[];return Object.keys(t).forEach(n=>{Object.keys(t[n].releases).forEach(r=>{let s=e(t[n].releases[r],n,r,o);s&&o.push(s)})}),o}function _fBrowserVersion(e,t,o){let n=e.split(".");return n[0].padStart(t)+n.join(".").substr(n[0].length).padEnd(o)}function compatToLong(e){let t=new Output(0),o=["chrome","edge","firefox","ie","opera","safari"],n=["webview_android","chrome_android","edge_mobile","firefox_android","opera_android","safari_ios"],r=["Â°","Â¹","Â²","Â³","Âª","^","`","'",'"',"'\"",'""','""\'',"Âº"],s=0,i=[],a=" %0----------+-----------+-----------+-----------+-----------+-----------";function l(o){o.forEach(o=>{let n,a=e.getBrowser(o);a?(n=a.info[0].getVersion(),a.hasNotes()&&(n+=ANSI.white+(options.notes?r[s]:"*"),i.push(a.getNotes(r[s])),s=++s%r.length),"?"===n&&(n=ANSI.yellow+"?")):n=ANSI.red+no,t.add("%0"+n.centerAnsi(11)+ANSI.white+"|",n.indexOf(no)>=0?ANSI.red:ANSI.cyan)}),t.trimEnd(1)}return t.addLine(ANSI.reset),options.markdown&&e.url.length?t.addLine(" [`%0%1`](%2) %3"+lf,e.prePath,e.name,e.url,e.getStatus()):(t.addLine(" %0%1%2%3%4 %5",ANSI.yellow,e.prePath,ANSI.cyan,e.name,ANSI.white,e.getStatus()),t.addLine(" ",e.url?ANSI.white+e.url:"-",lf)),options.mobile||(t.addLine(" %0DESKTOP:",ANSI.yellow),t.addLine(" %0Chrome    %1|%0 Edge      %1|%0 Firefox   %1|%0 IE        %1|%0 Opera     %1|%0 Safari%1",ANSI.green,ANSI.white),t.addLine(a,ANSI.white),l(o),t.addLine(lf),!options.noteend&&options.notes&&i.length&&t.addLine(i.join("")),options.noteend||(i=[],s=0)),options.desktop||(t.addLine(" %0MOBILE:",ANSI.yellow),t.addLine(" %0Webview/A %1|%0 Chrome/A  %1|%0 Edge/mob  %1|%0 Firefox/A %1|%0 Opera/A   %1|%0 Safari/iOS",ANSI.green,ANSI.white),t.addLine(a,ANSI.white),l(n),t.addLine(lf),options.notes&&i.length&&t.addLine(i.join(""))),t.trimEnd(lf.length),t.toString()}function compatToShort(e,t){let o=e.prePath+e.name,n=new Output(0),r=["chrome","edge","firefox","ie","opera","safari"],s=["android","chrome_android","firefox_android","edge_mobile","opera_android","safari_ios"],i=["C:","E:","F:","IE:","O:","S:"],a=["WA:","CA:","FA:","EM:","OA:","Si:"];function l(t,o){t.forEach((t,r)=>{let s,i=e.getBrowser(t);i?(s=i.info[0].getVersion(),i.hasNotes()&&(s+=ANSI.white+"*")):s=ANSI.red+no,n.add(ANSI.green,ANSI.bright,o[r],ANSI.white,s," ")})}return options.shorthandSplit?n.add(o,":",lf):n.add(o.padEnd(t),":"),options.mobile||(n.add("%0  DT: ",ANSI.yellow),l(r,i)),options.desktop||(n.add("%0 MOB: ",ANSI.yellow),l(s,a)),n.trimEnd(1),n.toString()}function compatToSVG(e){const t=new Output,o=["chrome","edge","firefox","ie","opera","safari"],n=["android","chrome,android","edge","firefox,android","opera,android","safari"],r=["Chrome","Edge","Firefox","IE","Opera","Safari"],s=["Webview for Android","Chrome for Android","Edge for mobile","Firefox for Android","Opera for Android","Safari for iOS"],i=["webview_android","chrome_android","edge_mobile","firefox_android","opera_android","safari_ios"],a={desktop:!options.mobile,mobile:!options.desktop,showNotes:!options.noNotes},l=options.width,d=a.mobile,h=a.desktop,c=l-0,p=d&&h?c/2+0:0,f=c/(d&&h?12:6),u=20,g="#E4F7E1",m="#FBE3E3",w=45;let S,A,b=[],v=0,I=1,N=50+2*w;for(t.add('<svg xmlns="http://www.w3.org/2000/svg" %1width="%0">',options.width,e.url.length?'xmlns:xlink="http://www.w3.org/1999/xlink" ':""),t.add("\x3c!-- Made by mdncomp v. "+version+" --\x3e"),(a.desktop||a.mobile)&&(z("chrome","M8.071 13.954l-4.579-7.931c2.932-3.671 7.445-6.023 12.508-6.023 5.857 0 10.978 3.148 13.767 7.844h-13.055c-0.235-0.020-0.472-0.031-0.711-0.031-3.809 0-7.018 2.614-7.929 6.142zM21.728 10.156h9.171c0.711 1.81 1.101 3.781 1.101 5.844 0 8.776-7.066 15.9-15.818 15.998l6.544-11.334c0.921-1.324 1.462-2.932 1.462-4.664 0-2.287-0.943-4.357-2.459-5.844zM10.188 16c0-3.205 2.607-5.813 5.813-5.813s5.813 2.607 5.813 5.813c0 3.205-2.608 5.813-5.813 5.813s-5.813-2.608-5.813-5.813zM18.193 23.889l-4.581 7.934c-7.704-1.153-13.613-7.797-13.613-15.822 0-2.851 0.746-5.526 2.053-7.845l6.532 11.314c1.308 2.785 4.14 4.718 7.415 4.718 0.759 0 1.495-0.104 2.193-0.299z"),z("firefox","M31.954 10.442l-0.371 2.377c0 0-0.53-4.402-1.179-6.047-0.995-2.521-1.438-2.501-1.441-2.498 0.667 1.694 0.546 2.604 0.546 2.604s-1.181-3.219-4.303-4.243c-3.459-1.134-5.33-0.824-5.547-0.765-0.033-0-0.064-0-0.095-0 0.026 0.002 0.050 0.005 0.076 0.007-0.001 0.001-0.003 0.001-0.003 0.002 0.014 0.017 3.822 0.666 4.497 1.594 0 0-1.617 0-3.227 0.464-0.073 0.021 5.923 0.749 7.148 6.74 0 0-0.657-1.371-1.47-1.604 0.535 1.626 0.397 4.712-0.112 6.245-0.066 0.197-0.133-0.853-1.135-1.305 0.321 2.301-0.019 5.952-1.616 6.957-0.124 0.078 1.001-3.603 0.226-2.18-4.46 6.838-9.731 3.155-12.101 1.535 1.215 0.264 3.52-0.041 4.541-0.8 0.001-0.001 0.002-0.002 0.004-0.003 1.108-0.758 1.765-1.311 2.354-1.18s0.982-0.46 0.524-0.985c-0.459-0.526-1.572-1.249-3.079-0.855-1.063 0.278-2.379 1.454-4.389 0.264-1.543-0.914-1.688-1.673-1.702-2.199 0.038-0.186 0.086-0.361 0.143-0.52 0.178-0.496 0.716-0.646 1.015-0.764 0.508 0.087 0.946 0.246 1.405 0.481 0.006-0.153 0.008-0.356-0.001-0.586 0.044-0.088 0.017-0.352-0.054-0.674-0.041-0.322-0.107-0.655-0.211-0.959 0-0 0.001-0 0.001-0 0.002-0.001 0.003-0.001 0.005-0.002s0.005-0.004 0.007-0.006c0-0.001 0.001-0.001 0.001-0.002 0.003-0.004 0.005-0.008 0.006-0.015 0.032-0.144 0.376-0.423 0.804-0.722 0.383-0.268 0.834-0.553 1.19-0.774 0.314-0.195 0.554-0.34 0.605-0.378 0.019-0.015 0.042-0.032 0.068-0.051 0.005-0.004 0.009-0.007 0.014-0.011 0.003-0.002 0.006-0.005 0.009-0.007 0.169-0.135 0.421-0.389 0.474-0.924 0-0.001 0-0.002 0-0.004 0.002-0.016 0.003-0.032 0.004-0.048 0.001-0.011 0.002-0.023 0.002-0.034 0-0.009 0.001-0.018 0.001-0.027 0.001-0.021 0.002-0.043 0.002-0.065 0-0.001 0-0.002 0-0.004 0.001-0.052-0-0.106-0.003-0.163-0.002-0.032-0.004-0.060-0.009-0.086-0-0.001-0.001-0.003-0.001-0.004-0.001-0.003-0.001-0.005-0.002-0.008-0.001-0.005-0.002-0.009-0.004-0.013-0-0.001-0-0.001-0.001-0.001-0.002-0.005-0.004-0.010-0.005-0.014-0-0-0-0-0-0.001-0.055-0.128-0.26-0.177-1.108-0.191-0.001-0-0.002-0-0.002-0v0c-0.346-0.006-0.798-0.006-1.391-0.004-1.039 0.004-1.613-1.016-1.797-1.41 0.251-1.389 0.977-2.379 2.17-3.051 0.023-0.013 0.018-0.023-0.009-0.031 0.233-0.141-2.82-0.004-4.225 1.782-1.247-0.31-2.333-0.289-3.269-0.069-0.18-0.005-0.404-0.027-0.67-0.083-0.623-0.564-1.514-1.606-1.562-2.85 0 0-0.003 0.002-0.008 0.006-0.001-0.012-0.002-0.024-0.002-0.036 0 0-1.897 1.458-1.613 5.434-0.001 0.064-0.002 0.125-0.004 0.184-0.514 0.696-0.768 1.282-0.787 1.411-0.455 0.926-0.917 2.32-1.292 4.437 0 0 0.263-0.833 0.79-1.777-0.388 1.188-0.693 3.036-0.514 5.808 0 0 0.047-0.615 0.215-1.5 0.131 1.719 0.704 3.841 2.152 6.337 2.78 4.791 7.052 7.211 11.775 7.582 0.839 0.069 1.689 0.071 2.544 0.006 0.079-0.006 0.157-0.011 0.236-0.018 0.968-0.068 1.942-0.214 2.914-0.449 13.287-3.212 11.842-19.256 11.842-19.256z"),z("edge","M0.481 14.206c0.938-7.4 5.987-14.113 15.037-14.206 5.463 0.106 9.956 2.581 12.631 7.3 1.344 2.462 1.762 5.050 1.85 7.906v3.356h-20.081c0.094 8.281 12.188 8 17.394 4.35v6.744c-3.050 1.831-9.969 3.469-15.325 1.363-4.563-1.712-7.813-6.488-7.794-11.081-0.15-5.956 2.962-9.9 7.794-12.144-1.025 1.269-1.806 2.669-2.213 5.094h11.338c0 0 0.663-6.775-6.419-6.775-6.675 0.231-11.488 4.112-14.213 8.094v0z"),z("opera","M32 16v0 0c0 4.738-2.063 9-5.337 11.925-4.106 2-7.931 0.6-9.194-0.275 4.031-0.881 7.075-5.756 7.075-11.65s-3.044-10.769-7.075-11.656c1.269-0.875 5.094-2.275 9.194-0.275 3.275 2.931 5.337 7.194 5.337 11.931v0 0z","M10.731 6.981c-1.769 2.087-2.912 5.175-2.987 8.644 0 0.006 0 0.744 0 0.756 0.075 3.462 1.225 6.55 2.994 8.637 2.294 2.981 5.706 4.869 9.519 4.869 2.344 0 4.538-0.712 6.413-1.956-2.837 2.531-6.575 4.069-10.669 4.069-0.256 0-0.512-0.006-0.762-0.019-8.481-0.4-15.238-7.4-15.238-15.981 0-8.838 7.162-16 16-16 0.019 0 0.038 0 0.063 0 4.075 0.013 7.787 1.55 10.606 4.075-1.875-1.244-4.069-1.962-6.413-1.962-3.813 0-7.225 1.887-9.525 4.869z"),z("ie","M22.944 19.651h7.377c0.057-0.512 0.080-1.034 0.080-1.569 0-2.507-0.673-4.858-1.848-6.883 1.215-3.228 1.172-5.968-0.455-7.606-1.547-1.54-5.697-1.29-10.388 0.787-0.347-0.026-0.697-0.040-1.051-0.040-6.439 0-11.841 4.431-13.335 10.402 2.020-2.586 4.145-4.461 6.984-5.826-0.258 0.242-1.764 1.739-2.018 1.993-7.486 7.484-9.847 17.26-7.306 19.8 1.931 1.93 5.43 1.604 9.449-0.364 1.869 0.952 3.984 1.488 6.226 1.488 6.035 0 11.15-3.885 13.003-9.295h-7.433c-1.023 1.887-3.023 3.171-5.319 3.171s-4.296-1.284-5.319-3.171c-0.455-0.852-0.716-1.83-0.716-2.864v-0.023h12.071zM10.884 16.025c0.171-3.035 2.694-5.456 5.774-5.456s5.604 2.421 5.774 5.456h-11.548zM28.030 5.119c1.048 1.059 1.021 3.007 0.125 5.438-1.535-2.341-3.766-4.186-6.4-5.239 2.816-1.207 5.106-1.367 6.274-0.199zM2.921 30.227c-1.337-1.337-0.934-4.144 0.788-7.526 1.072 3.008 3.161 5.534 5.854 7.161-2.982 1.354-5.423 1.584-6.643 0.365z"),z("safari","M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM3 16c0-7.18 5.82-13 13-13 3.424 0 6.538 1.325 8.86 3.488l-12.86 5.512-5.512 12.86c-2.164-2.322-3.488-5.436-3.488-8.86zM18.286 18.286l-8.003 3.43 3.43-8.003 4.573 4.573zM16 29c-3.424 0-6.539-1.325-8.86-3.488l12.86-5.512 5.512-12.86c2.164 2.322 3.488 5.436 3.488 8.86 0 7.18-5.82 13-13 13z")),a.desktop&&z("desktop","M0 2v20h32v-20h-32zM30 20h-28v-16h28v16zM21 24h-10l-1 4-2 2h16l-2-2z"),a.mobile&&(z("mobile","M24 0h-18c-1.1 0-2 0.9-2 2v28c0 1.1 0.9 2 2 2h18c1.1 0 2-0.9 2-2v-28c0-1.1-0.9-2-2-2zM15 30.556c-0.859 0-1.556-0.697-1.556-1.556s0.697-1.556 1.556-1.556 1.556 0.697 1.556 1.556-0.697 1.556-1.556 1.556zM24 26h-18v-22h18v22z"),z("android","M28 12c-1.1 0-2 0.9-2 2v8c0 1.1 0.9 2 2 2s2-0.9 2-2v-8c0-1.1-0.9-2-2-2zM4 12c-1.1 0-2 0.9-2 2v8c0 1.1 0.9 2 2 2s2-0.9 2-2v-8c0-1.1-0.9-2-2-2zM7 23c0 1.657 1.343 3 3 3v0 4c0 1.1 0.9 2 2 2s2-0.9 2-2v-4h4v4c0 1.1 0.9 2 2 2s2-0.9 2-2v-4c1.657 0 3-1.343 3-3v-11h-18v11z","M24.944 10c-0.304-2.746-1.844-5.119-4.051-6.551l1.001-2.001c0.247-0.494 0.047-1.095-0.447-1.342s-1.095-0.047-1.342 0.447l-1.004 2.009-0.261-0.104c-0.893-0.297-1.848-0.458-2.84-0.458s-1.947 0.161-2.84 0.458l-0.261 0.104-1.004-2.009c-0.247-0.494-0.848-0.694-1.342-0.447s-0.694 0.848-0.447 1.342l1.001 2.001c-2.207 1.433-3.747 3.805-4.051 6.551v1h17.944v-1h-0.056zM13 8c-0.552 0-1-0.448-1-1s0.447-0.999 0.998-1c0.001 0 0.002 0 0.003 0s0.001-0 0.002-0c0.551 0.001 0.998 0.448 0.998 1s-0.448 1-1 1zM19 8c-0.552 0-1-0.448-1-1s0.446-0.999 0.998-1c0 0 0.001 0 0.002 0s0.002-0 0.003-0c0.551 0.001 0.998 0.448 0.998 1s-0.448 1-1 1z")),e.hasFlags()&&z("flag","M0 0h4v32h-4v-32z","M26 20.094c2.582 0 4.83-0.625 6-1.547v-16c-1.17 0.922-3.418 1.547-6 1.547s-4.83-0.625-6-1.547v16c1.17 0.922 3.418 1.547 6 1.547z","M19 1.016c-1.466-0.623-3.61-1.016-6-1.016-3.012 0-5.635 0.625-7 1.547v16c1.365-0.922 3.988-1.547 7-1.547 2.39 0 4.534 0.393 6 1.016v-16z"),e.standard&&z("html5","M1.892 0l2.567 28.801 11.524 3.199 11.554-3.204 2.572-28.796h-28.216zM24.52 9.42h-13.517l0.322 3.617h12.874l-0.97 10.844-7.245 2.008-7.237-2.008-0.495-5.547h3.547l0.252 2.82 3.933 1.060 0.009-0.002 3.935-1.062 0.408-4.58h-12.242l-0.953-10.681h17.694l-0.316 3.532z"),e.deprecated&&z("thumb","M17 5c-0.755 0-1.438 0.289-1.965 0.751-0.064-0.062-0.116-0.14-0.188-0.192-0.96-0.737-3.665-1.559-5.847-1.559-1.879 0-2.607 0.293-3.252 0.552-0.103 0.042-0.207 0.085-0.316 0.124-0.834 0.305-1.578 1.229-1.738 2.2l-0.664 5.972c-0.174 1.039 0.441 2.127 1.4 2.478 0.394 0.144 2.512 0.405 3.883 0.56-0.215 1.256-0.312 2.405-0.312 3.616 0 1.379 1.121 2.5 2.5 2.5s2.5-1.121 2.5-2.5c0-1.875 0.667-2.737 1.616-3.699 0.548 0.724 1.408 1.199 2.384 1.199 1.653 0 2.999-1.347 2.999-3v-6c-0.001-1.656-1.346-3.002-3-3.002zM11 19.5c0 0.275-0.225 0.5-0.5 0.5s-0.5-0.225-0.5-0.5c0-1.805 0.256-3.241 0.479-4.293l0.297-1.398-1.321 0.188c-0.605-0.050-3.934-0.447-4.335-0.552-0.058-0.028-0.132-0.18-0.108-0.321l0.663-5.976c0.037-0.223 0.291-0.539 0.443-0.594 0.131-0.049 0.254-0.099 0.377-0.146 0.544-0.219 1.015-0.408 2.506-0.408 1.914 0 4.118 0.753 4.633 1.146 0.156 0.12 0.366 0.564 0.366 0.854v4.977c-0.001 0.026-0.040 0.649-0.707 1.316-0.913 0.913-2.293 2.293-2.293 5.207zM18 14c0 0.552-0.448 1-1 1s-1-0.448-1-1v-6c0-0.552 0.448-1 1-1s1 0.448 1 1v6z"),e.experimental&&z("lab","M29.884 25.14l-9.884-16.47v-6.671h1c0.55 0 1-0.45 1-1s-0.45-1-1-1h-10c-0.55 0-1 0.45-1 1s0.45 1 1 1h1v6.671l-9.884 16.47c-2.264 3.773-0.516 6.86 3.884 6.86h20c4.4 0 6.148-3.087 3.884-6.86zM7.532 20l6.468-10.779v-7.221h4v7.221l6.468 10.779h-16.935z"),e.url.length&&z("link","M6 2v24h24v-24h-24zM28 24h-20v-20h20v20zM4 28v-21l-2-2v25h25l-2-2h-21z","M11 8l5 5-6 6 3 3 6-6 5 5v-13z"),e.url.length?(t.add('<a xlink:href="%0" style="cursor:pointer" target="_blank">',e.url),O(e.prePath,e.name,1,50,32),k("link",l-40,26,24,24,"#777"),t.add("</a>")):O(e.prePath,e.name,u,50,32),e.deprecated&&y("thumb","Deprecated",24,"#a00"),e.experimental&&y("lab","Experimental",0,"#c70"),e.standard&&y("html5","On standard track",0,"#070"),t.add('<g transform="translate(0, 104)">'),E(0,0,l,N,"#eaedf2"),a.desktop&&x(o,r,0,50+w),a.mobile&&x(i,s,p,50+w),A=0;A<l;A+=f)M(0|A,50,0|A,N,1,"#999");if(d&&M(p,0,p,N,2),M(0,50,l,50,2),M(0,50+w,l,50+w,1),M(0,N,l,N,2),h)for(k("desktop",((d?c/2:c)-20)/2+0,15,20,20),S=0,A=0;S<o.length;S++)k(o[S],A+f*S+(f-20)/2,50+(w-20)/2,20,20,"#676769",r[S]);if(d)for(k("mobile",((h?c/2:c)-20)/2+p,15,20,20),S=0,A=p;S<n.length;S++){let e=n[S].split(",");e.forEach((t,o)=>{k(t,(2===e.length?o?1.5:-1.5:0)+A+20*o+f*S+(f-20*e.length)/2,50+(w-20)/2,20,20,"#676769",s[S])})}function x(t,o,n,r){options.maxWidth=(l-60)/8,t.forEach((t,o)=>{let s,i,a,d,h=e.getBrowser(t),c=n+f*o,p=c+.5*f;if(h){if(a=h.hasFlags(),d=h.hasPrefix(),s=h.info[0].getVersion().replace("Y",yes16),h.hasNotes()){i=options.notes?++v:"*";let e=h.getNotes(v);e=(e+"").ansiFree().replace(/</g,"&lt;").replace(/>/g,"&gt;"),b.push(e)}}else s=no;E(c,r,f,w,s.indexOf("-")>=0?m:"?"===s?"#eaedf2":g),"-"===s?_(no16,p,r+28,0,0,"#c55","middle"):_(s,p,r+28,l<800?12:0,0,s.indexOf("-")<0&&s.indexOf("?")<0?"#070":"#000","middle"),i&&_(i,c+f-12,r+13,10,"#000","end"),a&&k("flag",c+5,r+5,10,10,"#555"),d&&_(h.prefix,c+5,r+41,12,!1,"#334")})}function y(e,t,o,n){o=o||14;e&&(k(e,I,69+(14===o?2:1),o,o,n),I+=20),_(t,I,84,16,!0,n),I+=105}function M(e,o,n,r,s,i){s/2!=s>>>1&&(e+=.5,o+=.5,n+=.5,r+=.5),t.add('<line x1="%0" y1="%1" x2="%2" y2="%3"  stroke="%5" stroke-width="%4" />',e,o,n,r,s||1,i||"#000")}function E(e,o,n,r,s,i){t.add('<rect x="%0" y="%1" width="%2" height="%3" fill="%4"%5 />',e,o,n,r,s,i?' title="'+i+'"':"")}function _(e,o,n,r,s,i,a){a=a?' text-anchor="'+a+'" ':"",t.add('<text x="%1" y="%2" fill="%5" %6font-family="%4" font-size="%3">%0</text>',e,o,n,r||16,s?"sans-serif":"Consolas, monospace",i||"#000",a)}function O(e,o,n,r,s){t.add('<text x="%2" y="%3" font-family="Consolas, monospace" font-size="%4"><tspan fill="#777">%0</tspan><tspan fill="#000">%1</tspan>',e,o,n,r,s||16),t.add("</text>")}function k(e,o,n,r,s,i,a){i=i?' fill="'+i+'"':"",a&&t.add("<g><title>%0</title>",a),arguments.length>3?t.add('<use href="#icon-%0" x="%1" y="%2" width="%3" height="%4"%5></use>',e,o,n,r,s,i):t.add('<use href="#icon-%0" width="%1" height="%2"%3></use>',e,o,n,i),a&&t.add("</g>")}function z(e,o){t.add('<symbol id="icon-%0" viewBox="-1 -1 34 34">',e);for(let e=1;e<arguments.length;e++)t.add('<path d="%0"></path>',arguments[e]);t.add("</symbol>")}return options.notes&&b.length&&(N+=16,b.forEach(e=>{!function(e){let t=e.split(lf),o=new Output;t.forEach(e=>{o.add('<tspan x="%0" dy="1.3em">',u),o.add(e),o.add("</tspan>")}),_(o.toString(),10,N,14),N+=15*t.length}(e)})),_('Data from MDN - "npm i -g mdncomp" by epistemex Â© 2018.',1,N+=45,14,!0,"#777"),t.add("</g></svg>"),t.toString()}function MDNComp(e){let t=getPathAsObject(e).__compat,o=["webview_android","chrome","chrome_android","edge","edge_mobile","firefox","firefox_android","ie","opera","opera_android","safari","safari_ios"],n=[!1,!0,!1,!0,!1,!0,!1,!0,!0,!1,!0,!1],r=t.status||{},s=Object.keys(t.support);this.path=e,this.prePath=prePathFromPath(e),this.name=nameFromPath(e),this.url=t.mdn_url||"",this.experimental=r.experimental,this.standard=r.standard_track,this.deprecated=r.deprecated,this.browsers=[],this.description=t.description,s.forEach(e=>{let r=o.indexOf(e);if(r>=0){let o=new Browser(t,e);o.isDesktop=n[r],this.browsers.push(o)}})}function Info(e){this.added=this.toStatus(e.version_added),this.removed=this.toStatus(e.version_removed),this.notes=e.notes?Array.isArray(e.notes)?e.notes:[e.notes]:[],this.flags=e.flags||[],e.prefix&&this.notes.unshift("Prefix: "+e.prefix),e.partial_implementation&&this.notes.unshift("Is partial implementation."),e.alternative_name&&this.notes.unshift("Uses a non-standard name: "+e.alternative_name),this.flags.forEach(e=>{this.notes.push(this.flagToString(e))})}function Browser(e,t){this.name=t,this.info=[];let o=e.support[t];Array.isArray(o)||(o=[o]),this.prefix=(o[o.length-1]||{}).prefix||"",o.forEach(e=>{this.info.push(new Info(e))})}function Output(e){this.string="",this.indent="    ".substr(0,0|e),this.linefeed=lf}MDNComp.prototype={getBrowser:function(e){for(let t of this.browsers)if(t.name===e)return t;return null},getStatus:function(){let e="(";return this.experimental&&(e+=ANSI.yellow+"EXPERIMENTAL"+ANSI.reset+", "),this.deprecated&&(e+=ANSI.red+"DEPRECATED"+ANSI.reset+", "),this.standard&&(e+=ANSI.green+"On Standard Track"+ANSI.reset+", "),"()"===(e=e.substr(0,Math.max(1,e.length-2))+")")?"":e},hasFlags:function(){for(let e of this.browsers)if(e.hasFlags())return!0;return!1}},Info.prototype={getVersion:function(){return this.removed?this.added+"-"+this.removed.replace("Y","?"):this.added},flagToString:function(e){switch(e.type){case"preference":return t("Behind flag "+ANSI.cyan);case"compile_flag":return t("Compile with "+ANSI.cyan);case"runtime_flag":return t("Run with "+ANSI.cyan)}function t(t){return t+e.name+ANSI.white+(e.value_to_set?" set to "+e.value_to_set:"")+"."}return""},toString:function(e){let t=(e?e+") ":"")+(isNaN(this.added)?"":this.getVersion()+": "),o="",n=new Output(0),r=!1;return this.notes.length>1&&(t+=lf,o="- "),this.notes.forEach(e=>{r=!0,n.addLine(breakLine(cleanHTML(o+e,!0),options.maxWidth))}),r?t+n.toString():""},toStatus:function(e){return"boolean"==typeof e?e?"Y":no:null===e?"?":e||null}},Browser.prototype={hasNotes:function(){for(let e of this.info)if(e.notes.length)return!0;return!1},hasFlags:function(){for(let e of this.info)if(e.flags.length)return!0;return!1},hasPrefix:function(){return this.prefix.length},getNotes:function(e){let t=new Output(0);return this.info.forEach(o=>{t.add(o.toString(e))}),t.toString()}},Output.prototype={add:function(e){if(e=e||"",arguments.length>1){let t=e.indexOf("%0")>=0;for(let o=1;o<arguments.length;o++){let n=new RegExp("%"+(o-1),"g");e=t?e.replace(n,arguments[o]):e+arguments[o]}}this.string+=this.indent+(e||"")},addLine:function(e){this.add.apply(this,arguments),this.string+=this.linefeed},trimEnd:function(e){this.string=this.string.substr(0,Math.max(0,this.string.length-e))},replace:function(e,t){let o=new RegExp(e,"g");this.string=this.string.replace(o,t)},toString:function(){return this.string}};